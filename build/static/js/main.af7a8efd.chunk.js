(this["webpackJsonploftschool-nodejs-project"]=this["webpackJsonploftschool-nodejs-project"]||[]).push([[0],{272:function(e,t){},358:function(e,t,a){"use strict";a.r(t);var n,r,c,i,o,s,l,u,m,d=a(0),p=a.n(d),f=a(11),h=a.n(f),b=a(17),g=a(18),E=a(20),v=a(19),O=a(56),j=a(9),w=a(183),N=a.n(w),x=a(7),y=a(136),S=a(423),k=a(29),C=a(184),T=a.n(C),P=a(61),A=a(422),I=Object(A.a)({OPEN_NOTIFICATION:function(e){return e},CLOSE_NOTIFICATION:function(e){return e}},{prefix:"notifications"}),R=I.openNotification,_=I.closeNotification,D=function(e){return e.notifications},L=Object(S.a)((n={},Object(x.a)(n,R,(function(e,t){var a=t.payload,n=a.text,r=a.variant;return[].concat(Object(P.a)(e),[{text:n,variant:r,id:e.length+1,isActive:!e.length}])})),Object(x.a)(n,_,(function(e,t){var a=e.filter((function(e){return e.id!==t.payload}));return a.length?a.map((function(e,t){return t===a.length-1&&(e.isActive=!0),e})):a})),n),[]),U=L,F=T.a.create({baseURL:"http://localhost:3000/api/"}),M=[],W=!1,H=function(e){var t=e.url,a=e.method,n=e.data,r=e.headers,c=void 0===r?{}:r,i=e.isRefresh,o=e.isWithoutToken,s=e.getState,l=void 0===s?function(){return{}}:s,u=e.dispatch,m=void 0===u?function(){}:u;return new Promise((function(e,r){var s=z(l()),u=s.accessToken,d=s.accessTokenExpiredAt,p=s.refreshTokenExpiredAt,f=function(e){var t=e.url,a=e.method,n=e.headers,r=e.data,c=e.resolve,s=e.reject;if(!o){var u=z(l()),d=u.accessToken,p=u.refreshToken;n.Authorization=i?p:d}return F({url:t,method:a,headers:n,data:r}).then((function(e){c(e.data)})).catch((function(e){if(!e.response)return m(R({variant:"error",text:"Error!!\n".concat(e.message)})),s(e.message);var a=e.response.status||404,n=e.response.data;switch(console.group("Error from: "+t),console.info("Status: "+a),console.dir(n),console.groupEnd(),a){case 401:case 403:return m(ie()),s(n);case 500:case 502:case 503:return m(R({variant:"error",text:"".concat(a,"!\nSomething is wrong))")})),s({detail:"Unknown error"});default:return s(n)}}))},h=d<=Date.now(),b=p<=Date.now();u&&h&&!b&&!o?(!i&&M.push({url:t,method:a,data:n,headers:c,isRefresh:i,resolve:e,reject:r}),i||W?i&&f({url:t,method:a,data:n,headers:c,resolve:e,reject:r}):(W=!0,m(ce()).then((function(){W=!1,M.forEach((function(e){return f(e)}))})).catch((function(){m(ie()),r({detail:"Refresh token error"})})))):b&&!o?(m(ie()),r({detail:"Refresh token is expired"})):f({url:t,method:a,data:n,headers:c,resolve:e,reject:r})}))},B=function(e){return e.auth.userProfile},G=function(e){return e.auth.permissions},z=function(e){return e.auth.tokens},q=function(e){return!!e.auth.tokens.accessToken},V=function(e){return e.auth.isLoadingUserProfile},X="AUTH",J=(Object(y.a)("".concat(X,"/LOGIN_USER_REQUEST")),Object(y.a)("".concat(X,"/REGISTRATION_USER_REQUEST")),Object(y.a)("".concat(X,"/SET_PROFILE_DATA"))),Z=Object(y.a)("".concat(X,"/SET_TOKEN_DATA")),Q=Object(y.a)("".concat(X,"/LOGOUT_USER")),Y=Object(y.a)("".concat(X,"/SET_IS_LOADING_USER_PROFILE")),K=Object(S.a)(Object(x.a)({},Y,(function(e,t){return t.payload})),!1),$=Object(S.a)((r={},Object(x.a)(r,J,(function(e,t){var a=t.payload,n=a.id,r=a.image,c=a.middleName,i=a.surName,o=a.username;return{id:n,image:r,firstName:a.firstName,middleName:c,surName:i,username:o}})),Object(x.a)(r,Q,(function(){return null})),r),null),ee={chat:{C:!1,D:!1,R:!1,U:!1},news:{C:!1,D:!1,R:!1,U:!1},settings:{C:!1,D:!1,R:!1,U:!1}},te=Object(S.a)((c={},Object(x.a)(c,J,(function(e,t){return t.payload.permission})),Object(x.a)(c,Q,(function(){return ee})),c),ee),ae=Object(S.a)((i={},Object(x.a)(i,Z,(function(e,t){var a=t.payload;return{accessToken:a.accessToken,accessTokenExpiredAt:a.accessTokenExpiredAt,refreshToken:a.refreshToken,refreshTokenExpiredAt:a.refreshTokenExpiredAt}})),Object(x.a)(i,Q,(function(){return{accessToken:null,accessTokenExpiredAt:null,refreshToken:null,refreshTokenExpiredAt:null}})),i),{accessToken:null,accessTokenExpiredAt:null,refreshToken:null,refreshTokenExpiredAt:null}),ne=Object(k.b)({userProfile:$,permissions:te,tokens:ae,isLoadingUserProfile:K}),re=function(){return function(e,t){var a=localStorage.getItem("token-data");a&&(e(Z(JSON.parse(a))),H({url:"/profile",method:"GET",dispatch:e,getState:t}).then((function(t){e(J(t))})).catch((function(e){})))}},ce=function(){return function(e,t){return new Promise((function(a,n){H({url:"/refresh-token",method:"POST",isRefresh:!0,dispatch:e,getState:t}).then((function(t){e(Z(t)),a(a)})).catch((function(e){return n(e)}))}))}},ie=function(){return function(e){localStorage.removeItem("token-data"),e(Q()),R({text:"\u0412\u044b \u0432\u044b\u0448\u043b\u0438 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u044b",variant:"info"})}},oe=function(e){var t=e.firstName,a=e.surName,n=e.middleName,r=e.oldPassword,c=e.newPassword,i=e.avatar;return function(e,o){return new Promise((function(s){var l=new FormData;l.append("firstName",t),l.append("surName",a),l.append("middleName",n),l.append("oldPassword",r),l.append("newPassword",c),l.append("avatar",i),e(Y(!0)),H({url:"/profile",method:"PATCH",data:l,getState:o,dispatch:e}).then((function(t){e(J(t)),e(R({text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d!",variant:"success"})),s(!0)})).catch((function(t){return e(R({text:t.message,variant:"error"}))})).finally((function(){return e(Y(!1))}))}))}},se="/",le="/registration",ue="/news",me="/chat",de="/profile",pe="/admin-panel",fe=Object(j.b)((function(e){return{permissions:G(e),isAuthorized:q(e)}}))((function(e){var t=e.permissionPath,a=e.path,n=e.component,r=e.permissions;return!e.isAuthorized||t&&!N.a.get(r,[t,"R"],!1)?p.a.createElement(O.a,{from:a,to:se}):p.a.createElement(O.b,{path:a,component:n})})),he=a(14),be=a(4),ge=a(421),Ee=a(391),ve=a(392),Oe=a(393),je=a(26),we=a(360),Ne=p.a.forwardRef((function(e,t){return p.a.createElement(je.b,Object.assign({innerRef:t},e))})),xe=Object(O.g)((function(e){var t=e.path,a=e.location,n=e.children,r=e.isRouterLink,c=e.color,i=void 0===c?"primary":c;return p.a.createElement(we.a,{color:r?a.pathname===t?i:"default":i,component:Ne,to:t},n)})),ye=a(30),Se=a.n(ye),ke=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"renderAuthorizedNav",value:function(){var e=this.props,t=e.permissions,a=e.profile;return p.a.createElement(p.a.Fragment,null,Se()(t,"news.R",!1)&&p.a.createElement(xe,{path:ue,isRouterLink:!0},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"),Se()(t,"chat.R",!1)&&p.a.createElement(xe,{path:me,isRouterLink:!0},"\u0427\u0430\u0442"),Se()(t,"settings.R",!1)&&p.a.createElement(xe,{path:pe,isRouterLink:!0},"\u0410\u0434\u043c\u0438\u043d\u043a\u0430"),p.a.createElement(xe,{path:de,isRouterLink:!0},a?a.username:""))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isAuthorized;return p.a.createElement("div",null,p.a.createElement(Ee.a,{position:"static",color:"default",className:t.appBar},p.a.createElement(ve.a,null,p.a.createElement(Oe.a,null,p.a.createElement("div",{className:t.logo},p.a.createElement("img",{src:"../../assets/img/logo.png",alt:"logo"})),p.a.createElement(xe,{path:se,isRouterLink:!0},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),a?this.renderAuthorizedNav():null))))}}]),a}(d.PureComponent),Ce=Object(he.a)(Object(be.a)((function(){return{logo:{flexGrow:1}}})),Object(j.b)((function(e){return{isAuthorized:q(e),permissions:G(e),profile:B(e)}})))(ke),Te=a(45),Pe=a(36),Ae=a(71),Ie=a(139),Re=a(394),_e=a(426),De=a(395),Le=a(396),Ue=a(397),Fe=Object(be.a)((function(e){return{textField:{display:200,marginBottom:e.spacing(3)}}}))((function(e){var t=e.id,a=e.classes,n=e.handleChange,r=e.value,c=e.label,i=e.required;return p.a.createElement(Re.a,{className:a.textField,required:i},p.a.createElement(_e.a,{htmlFor:"input-"+t},c),p.a.createElement(De.a,{id:"input-"+t,type:"text",value:r,autoComplete:t,onChange:n,startAdornment:p.a.createElement(Le.a,{position:"start"},p.a.createElement(Ue.a,null))}))})),Me=a(399),We=a(398),He=a(400),Be=a(401),Ge=a(49),ze=a.n(Ge),qe=Object(be.a)((function(e){return{textField:{display:200,marginBottom:e.spacing(3)}}}))((function(e){var t=e.id,a=e.classes,n=e.handleChange,r=e.value,c=e.label,i=e.className,o=e.name,s=p.a.useState({showPassword:!1}),l=Object(Ae.a)(s,2),u=l[0],m=l[1];return p.a.createElement(Re.a,{className:ze()(a.textField,i),required:!0},p.a.createElement(_e.a,{htmlFor:t},c),p.a.createElement(De.a,{id:t,autoComplete:t,type:u.showPassword?"text":"password",name:o,value:r,onChange:n,startAdornment:p.a.createElement(Le.a,{position:"start"},p.a.createElement(We.a,null)),endAdornment:p.a.createElement(Le.a,{position:"end"},p.a.createElement(Me.a,{"aria-label":"toggle password visibility",onClick:function(){m({showPassword:!u.showPassword})},onMouseDown:function(e){e.preventDefault()}},u.showPassword?p.a.createElement(He.a,null):p.a.createElement(Be.a,null)))}))})),Ve=Object(he.a)(Object(be.a)((function(){return{form:{display:"flex",flexDirection:"column",padding:"20px 40px",maxWidth:"300px"},textCenter:{textAlign:"center"}}})),Object(j.b)())((function(e){var t=e.classes,a=e.dispatch,n=Object(d.useState)({username:"",password:""}),r=Object(Ae.a)(n,2),c=r[0],i=r[1],o=function(e){return function(t){i(Object(Pe.a)(Object(Pe.a)({},c),{},Object(x.a)({},e,t.target.value)))}};return p.a.createElement(p.a.Fragment,null,p.a.createElement(Ie.a,{className:t.form,component:"form",onSubmit:function(e){e.preventDefault();var t=c.username,n=c.password;a(function(e){var t=e.username,a=e.password;return function(e,n){return new Promise((function(r,c){H({url:"/login",method:"POST",data:{username:t,password:a},isWithoutToken:!0,dispatch:e,getState:n}).then((function(t){e(R({text:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0448\u043b\u0438!",variant:"success"}));var a=t.accessToken,n=t.accessTokenExpiredAt,c=t.refreshToken,i=t.refreshTokenExpiredAt;localStorage.setItem("token-data",JSON.stringify({accessToken:a,accessTokenExpiredAt:n,refreshToken:c,refreshTokenExpiredAt:i})),e(J(t)),e(Z(t)),r(t)})).catch((function(t){e(R({text:t.message,variant:"error"})),c(t)}))}))}}({username:t,password:n}))}},p.a.createElement(Fe,{handleChange:o("username"),value:c.username,id:"username",label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",required:!0}),p.a.createElement(qe,{handleChange:o("password"),value:c.password,id:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c"}),p.a.createElement(we.a,{color:"primary",variant:"contained",type:"submit"},"\u0412\u043e\u0439\u0442\u0438")),p.a.createElement(Te.a,{className:ze()(t.textCenter,t.form)},"\u0412\u043f\u0435\u0440\u0432\u044b\u0435 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435? ",p.a.createElement(je.b,{to:le},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))})),Xe=Object(he.a)(Object(be.a)((function(){return{form:{display:"flex",flexDirection:"column",padding:"20px 40px",maxWidth:"300px"},textCenter:{textAlign:"center"}}})),Object(j.b)(),O.g)((function(e){var t=e.classes,a=e.dispatch,n=e.history,r=Object(d.useState)({username:"",password:"",repeatPassword:"",firstname:"",lastname:"",patronicname:""}),c=Object(Ae.a)(r,2),i=c[0],o=c[1],s=function(e){return function(t){o(Object(Pe.a)(Object(Pe.a)({},i),{},Object(x.a)({},e,t.target.value)))}};return p.a.createElement(p.a.Fragment,null,p.a.createElement(Ie.a,{className:t.form,component:"form",onSubmit:function(e){e.preventDefault();var t=i.username,r=i.password,c=i.firstname,o=i.lastname,s=i.patronicname;a(function(e){var t=e.username,a=e.password,n=e.firstname,r=e.lastname,c=e.patronicname;return function(e,i){return new Promise((function(o,s){var l={username:t,surName:r,firstName:n,middleName:c,password:a};H({url:"/registration",data:l,method:"POST",isWithoutToken:!0,dispatch:e,getState:i}).then((function(){e(R({text:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b!",variant:"success"})),o(l)})).catch((function(t){e(R({text:t.message,variant:"error"})),s(t)}))}))}}({username:t,password:r,firstname:c,lastname:o,patronicname:s})).then((function(){return n.push(se)})).catch(console.error)}},p.a.createElement(Fe,{id:"username",handleChange:s("username"),value:i.username,label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",required:!0}),p.a.createElement(Fe,{id:"lastname",handleChange:s("lastname"),value:i.lastname,label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"}),p.a.createElement(Fe,{id:"firstname",handleChange:s("firstname"),value:i.firstname,label:"\u0418\u043c\u044f"}),p.a.createElement(Fe,{id:"patronicname",handleChange:s("patronicname"),value:i.patronicname,label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"}),p.a.createElement(qe,{id:"password",handleChange:s("password"),value:i.password,label:"\u041f\u0430\u0440\u043e\u043b\u044c"}),p.a.createElement(qe,{id:"repeatPassword",handleChange:s("repeatPassword"),value:i.repeatPassword,label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"}),p.a.createElement(we.a,{color:"primary",variant:"contained",type:"submit"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),p.a.createElement(Te.a,{className:ze()(t.textCenter,t.form)},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",p.a.createElement(je.b,{to:se},"\u0412\u043e\u0439\u0442\u0438")))})),Je=Object(he.a)(Object(be.a)((function(){return{form:{display:"flex",flexDirection:"column",padding:"20px 40px",maxWidth:"300px"}}})),Object(j.b)())((function(e){var t=e.classes,a=e.dispatch;return p.a.createElement(Ie.a,{className:t.form,component:"form",onSubmit:function(e){e.preventDefault(),a(ie())}},p.a.createElement(we.a,{color:"primary",variant:"contained",type:"submit"},"\u0412\u044b\u0439\u0442\u0438"))})),Ze=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isAuthorized;return p.a.createElement("div",{className:t.wrapper},p.a.createElement(ve.a,null,p.a.createElement(Te.a,{variant:"h4",component:"h2",gutterBottom:!0},"\u0412\u0430\u0448\u0435 \u0443\u044e\u0442\u043d\u043e\u0435",p.a.createElement("br",null),"\u0440\u0430\u0431\u043e\u0447\u0435\u0435 \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e"),a?p.a.createElement(Je,null):p.a.createElement(p.a.Fragment,null,p.a.createElement(O.b,{path:"/",exact:!0,component:Ve}),p.a.createElement(O.b,{path:"/registration",component:Xe}))))}}]),a}(d.PureComponent),Qe=Object(he.a)(Object(be.a)((function(){return{wrapper:{background:'url("/assets/img/background.png") no-repeat',backgroundPosition:"center center",backgroundSize:"cover",width:"100%",flex:"1 1 100%",paddingTop:"40px"}}})),Object(j.b)((function(e){return{isAuthorized:q(e)}})),O.g)(Ze),Ye=a(361),Ke=function(e){return e.news.isLoadingNewsList},$e=function(e){return e.news.isLoadingNewsForm},et=function(e){return e.news.isLoaded},tt=function(e){return e.news.news},at="NEWS",nt=Object(y.a)("".concat(at,"/SET_IS_LOADING_NEWS_LIST")),rt=Object(y.a)("".concat(at,"/SET_IS_LOADING_NEWS_FORM")),ct=Object(y.a)("".concat(at,"/SET_NEWS_LIST")),it=Object(y.a)("".concat(at,"/APPEND_NEWS")),ot=Object(y.a)("".concat(at,"/SET_TO_ZERO_NEWS_LIST")),st=(Object(y.a)("".concat(at,"/SET_IS_LOADED")),Object(S.a)(Object(x.a)({},nt,(function(e,t){return t.payload})),!1)),lt=Object(S.a)(Object(x.a)({},rt,(function(e,t){return t.payload})),!1),ut=Object(S.a)(Object(x.a)({},ct,(function(e,t){return!0})),!1),mt=Object(S.a)((o={},Object(x.a)(o,ct,(function(e,t){return t.payload})),Object(x.a)(o,it,(function(e,t){return[t.payload].concat(Object(P.a)(e))})),Object(x.a)(o,ot,(function(){return[]})),o),[]),dt=Object(k.b)({isLoadingNewsList:st,isLoadingNewsForm:lt,isLoaded:ut,news:mt}),pt=function(e){var t=e.title,a=e.text;return function(e,n){return new Promise((function(r,c){var i={title:t,text:a};e(rt(!0)),H({url:"/news",method:"POST",data:i,getState:n,dispatch:e}).then((function(t){e(ct(t)),r(t)})).catch((function(e){c(e)})).finally((function(){return e(rt(!1))}))}))}},ft=function(e){var t=e.id,a=e.title,n=e.text;return function(e,r){return new Promise((function(c,i){var o={title:a,text:n};e(rt(!0)),H({url:"/news/".concat(t),method:"PATCH",data:o,getState:r,dispatch:e}).then((function(t){e(ct(t)),c(t)})).catch((function(e){i(e)})).finally((function(){return e(rt(!1))}))}))}},ht=a(402),bt=a(403),gt=a(427),Et=a(404),vt=a(405),Ot=function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"},card:{marginBottom:e.spacing(2)}}},jt=Object(Ye.a)(Ot)((function(e){var t=e.classes,a=e.post,n=e.dispatch,r=e.permission,c=!!Se()(r,"news.U",!1),i=!!Se()(r,"news.D",!1);return p.a.createElement(ht.a,{className:t.card},p.a.createElement(bt.a,{avatar:p.a.createElement(gt.a,{"aria-label":"recipe",src:a.user.image||"/assets/img/no-user-image.png",alt:a.user.username}),title:a.title,subheader:a.created_at}),p.a.createElement(Et.a,null,p.a.createElement(Te.a,{variant:"body2",color:"textSecondary",component:"p"},a.text)),p.a.createElement(vt.a,null,c&&p.a.createElement(xe,{path:"/news/".concat(a.id,"/edit")},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),i&&p.a.createElement(we.a,{onClick:function(){n(function(e){var t=e.id;return function(e,a){return new Promise((function(n,r){e(nt(!0)),H({url:"/news/".concat(t),method:"DELETE",getState:a,dispatch:e}).then((function(t){e(ct(t)),n(t)})).catch((function(e){r(e)})).finally((function(){return e(nt(!1))}))}))}}({id:a.id}))}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))})),wt=Object(he.a)(Object(Ye.a)(Ot),Object(j.b)((function(e){return{permission:G(e)}})))(jt),Nt=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)((function(e,t){et(t())||(e(nt(!0)),H({url:"/news",method:"GET",getState:t,dispatch:e}).then((function(t){return e(ct(t))})).catch((function(e){return console.log(e)})).finally((function(){return e(nt(!1))})))}))}},{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.isLoaded,n=e.news,r=e.permission,c=!!Se()(r,"news.C",!1);return p.a.createElement(p.a.Fragment,null,c&&p.a.createElement(xe,{color:"primary",path:"".concat(ue,"/add")},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),p.a.createElement("div",null,t?p.a.createElement("div",null,"Loading..."):null,a?n.length?n.map((function(e){return p.a.createElement(wt,{post:e,key:e.id})})):p.a.createElement("div",null,"\u041d\u0435\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439"):null))}}]),a}(d.PureComponent),xt=Object(j.b)((function(e){return{isLoading:Ke(e),isLoaded:et(e),news:tt(e),permission:G(e)}}),null)(Nt),yt=a(406),St=a(428),kt=a(409),Ct=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={title:"",text:"",createdAt:new Date,user:""},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(x.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.title,r=a.text,c=e.props,i=c.history,o=c.dispatch,s=c.match;o(s.params.id?ft({title:n,text:r,id:s.params.id}):pt({title:n,text:r})).then((function(){return i.push(ue)}))},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.newsList;if(t.params.id){var n=a.find((function(e){return e.id===t.params.id})),r=n.title,c=n.text,i=n.created_at,o=n.user;this.setState({title:r,text:c,createdAt:i,user:o.username})}}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.title,n=t.text,r=t.createdAt,c=t.user;return p.a.createElement(Ie.a,{className:e.formCard,component:"form",onSubmit:this.handleSubmit},p.a.createElement(yt.a,{container:!0,spacing:2},p.a.createElement(yt.a,{item:!0,xs:4},p.a.createElement(St.a,{label:"\u0410\u0432\u0442\u043e\u0440",value:c,onChange:this.handleChange,className:e.textField,margin:"normal",disabled:!0,fullWidth:!0}),p.a.createElement(St.a,{label:"\u0414\u0430\u0442\u0430",value:r,onChange:this.handleChange,className:e.textField,margin:"normal",disabled:!0,fullWidth:!0}),p.a.createElement(St.a,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",name:"title",value:a,onChange:this.handleChange,className:e.textField,margin:"normal",fullWidth:!0})),p.a.createElement(yt.a,{item:!0,xs:8},p.a.createElement(St.a,{label:"\u0422\u0435\u043a\u0441\u0442",name:"text",value:n,onChange:this.handleChange,className:e.textField,margin:"normal",multiline:!0,fullWidth:!0,rows:5}),p.a.createElement(kt.a,null,p.a.createElement(we.a,{variant:"contained",color:"secondary",type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),p.a.createElement(xe,{path:"/news",variant:"contained"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")))))}}]),a}(d.PureComponent),Tt=Object(he.a)(Object(Ye.a)((function(e){return{formCard:{padding:e.spacing(2)},textField:{display:"block",width:"100%"}}})),O.g,Object(j.b)((function(e){return{isLoading:$e(e),newsList:tt(e)}}),null))(Ct),Pt=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props.classes;return p.a.createElement("div",{className:e.wrapper},p.a.createElement(ve.a,null,p.a.createElement(Te.a,{variant:"h4",component:"h2",gutterBottom:!0},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"),p.a.createElement(O.b,{path:"/news",exact:!0,component:xt}),p.a.createElement(O.b,{path:"/news/add",component:Tt}),p.a.createElement(O.b,{path:"/news/:id/edit",component:Tt})))}}]),a}(d.PureComponent),At=Object(Ye.a)((function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"}}}))(Pt),It=a(192),Rt=a.n(It),_t=null,Dt=function(e){return e.chat.users},Lt=function(e){return e.chat.messages},Ut=function(e){return e.chat.selectedRoom},Ft=function(e){return e.chat.messageText},Mt="CHAT",Wt=Object(y.a)("".concat(Mt,"/SET_USERS")),Ht=Object(y.a)("".concat(Mt,"/ADD_USER")),Bt=Object(y.a)("".concat(Mt,"/UPDATE_USER")),Gt=Object(y.a)("".concat(Mt,"/REMOVE_USER")),zt=Object(y.a)("".concat(Mt,"/ADD_MESSAGE")),qt=Object(y.a)("".concat(Mt,"/SET_ROOM_HISTORY")),Vt=Object(y.a)("".concat(Mt,"/SET_TO_ZERO_MESSAGES")),Xt=Object(y.a)("".concat(Mt,"/SET_SELECTED_ROOM")),Jt=Object(y.a)("".concat(Mt,"/SET_MESSAGE_TEXT")),Zt=Object(y.a)("".concat(Mt,"/RESET_MESSAGE")),Qt=Object(S.a)((s={},Object(x.a)(s,Wt,(function(e,t){return t.payload})),Object(x.a)(s,Ht,(function(e,t){return[t.payload].concat(Object(P.a)(e))})),Object(x.a)(s,Bt,(function(e,t){return e.map((function(e){return e.userId===t.payload.userId?t.payload:e}))})),Object(x.a)(s,Gt,(function(e,t){return e.filter((function(e){return e.socketId!==t.payload}))})),s),[]),Yt=Object(S.a)((l={},Object(x.a)(l,zt,(function(e,t){return[].concat(Object(P.a)(e),[t.payload])})),Object(x.a)(l,qt,(function(e,t){return t.payload})),Object(x.a)(l,Vt,(function(){return[]})),l),[]),Kt=Object(S.a)(Object(x.a)({},Xt,(function(e,t){return t.payload})),null),$t=Object(S.a)((u={},Object(x.a)(u,Jt,(function(e,t){return t.payload})),Object(x.a)(u,Zt,(function(){return""})),u),""),ea=Object(k.b)({users:Qt,messages:Yt,selectedRoom:Kt,messageText:$t}),ta=function(){return function(e,t){var a=t(),n=B(a),r=Ut(a),c=Ft(a);_t.emit("message:add",{senderId:n.id,recipientId:r.recipientId,roomId:r.socketId,text:c}),e(Zt())}},aa=a(410),na=a(408),ra=a(364),ca=a(411),ia=Object(he.a)(Object(Ye.a)((function(e){return{column:{height:"calc(100vh - 80px)",display:"flex",flexDirection:"column"}}})),Object(j.b)((function(e){return{users:Dt(e),selectedRoom:Ut(e)}})))((function(e){var t=e.classes,a=e.users,n=e.selectedRoom,r=e.dispatch,c=function(e){r(function(e){var t=e.userId,a=e.socketId;return function(e,n){var r=B(n());e(Vt()),e(Xt({recipientId:t,socketId:a})),_t.emit("message:history",{recipientId:t,userId:r.id})}}({userId:e.userId,socketId:e.socketId}))};return p.a.createElement(Ie.a,{className:t.column,square:!0},p.a.createElement(bt.a,{title:p.a.createElement(Te.a,{variant:"h5"},"\u041b\u0438\u0447\u043d\u044b\u0435 \u0447\u0430\u0442\u044b")}),p.a.createElement(aa.a,null),p.a.createElement(na.a,null,a.map((function(e,t){return p.a.createElement(ra.a,{button:!0,key:e.userId,selected:e.userId===n&&n.userId,onClick:function(){return c(e)}},p.a.createElement(ca.a,{primary:e.username}))}))))})),oa=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){(0,e.props.dispatch)(Jt(t.target.value))},e.handleSubmit=function(t){t.preventDefault(),(0,e.props.dispatch)(ta())},e}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.messages,n=e.messageText,r=e.userId,c=e.permission,i=!!Se()(c,"chat.C",!1);return p.a.createElement(p.a.Fragment,null,p.a.createElement(Et.a,{className:t.chatArea},p.a.createElement(yt.a,{container:!0,direction:"column",wrap:"nowrap"},a.map((function(e,a){return p.a.createElement(yt.a,{item:!0,key:a,className:ze()(t.messageContainer,e.senderId!==r?t.isMyMessage:t.isAnotherMessage)},p.a.createElement(ht.a,{className:ze()(t.message,e.senderId!==r?t.messagePrimary:t.messageSecondary)},e.text))})))),i&&p.a.createElement(vt.a,null,p.a.createElement("form",{onSubmit:this.handleSubmit,className:t.form},p.a.createElement(St.a,{label:"Label",style:{margin:8},fullWidth:!0,margin:"normal",variant:"filled",InputLabelProps:{shrink:!0},value:n,onChange:this.handleChange}),p.a.createElement(we.a,{variant:"contained",color:"primary",type:"submit"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))))}}]),a}(d.PureComponent),sa=Object(he.a)(Object(Ye.a)((function(e){return{messageContainer:{marginBottom:e.spacing(2)},message:{padding:e.spacing(1)},messagePrimary:{backgroundColor:e.palette.grey.A700},messageSecondary:{backgroundColor:e.palette.secondary.main},isMyMessage:{alignSelf:"end"},isAnotherMessage:{alignSelf:"flex-end"},chatArea:{height:"100%",overflowY:"scroll"},form:{display:"flex",alignItems:"center",width:"100%"}}})),Object(j.b)((function(e){return{messageText:Ft(e),userId:B(e).id,permission:G(e)}})))(oa),la=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)((function(e,t){var a=B(t());(_t=Rt()("http://localhost:3000")).emit("users:connect",{userId:a.id,username:a.username}),_t.on("users:list",(function(t){return e(Wt(t))})).on("users:add",(function(t){return e(Ht(t))})).on("users:leave",(function(a){e(Gt(a));var n=Ut(t());n&&n.socketId===a&&e(Xt(null))})).on("message:history",(function(t){return e(qt(t))})).on("message:add",(function(t){return e(zt(t))}))}))}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)((function(e){_t&&_t.disconnect(),e(Wt([])),e(Vt()),e(Xt(null)),e(Zt())}))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.users,n=e.messages,r=e.selectedRoom;return p.a.createElement("div",{className:t.wrapper},p.a.createElement(ve.a,null,p.a.createElement(yt.a,{container:!0,spacing:1},p.a.createElement(yt.a,{item:!0,xs:4},p.a.createElement(ia,{users:a,selected:r})),p.a.createElement(yt.a,{item:!0,xs:8},p.a.createElement(ht.a,{className:t.column,square:!0},r?p.a.createElement(sa,{messages:n}):p.a.createElement("div",{className:t.empty},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0447\u0430\u0442"))))))}}]),a}(d.PureComponent),ua=Object(he.a)(Object(Ye.a)((function(e){return{toolbar:e.mixins.toolbar,column:{height:"calc(100vh - 80px)",display:"flex",flexDirection:"column"},wrapper:{width:"100%",flex:"1 1 100%",paddingTop:e.spacing(1)},empty:{padding:e.spacing(3)}}})),Object(j.b)((function(e){return{users:Dt(e),selectedRoom:Ut(e),messages:Lt(e)}})))(la),ma=a(193),da=a.n(ma),pa=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={firstName:"",middleName:"",surName:"",oldPassword:"",newPassword:"",confirmPassword:"",image:"",fileRef:p.a.createRef()},e.cancelHandler=function(){var t=e.props.userProfile;e.setState({firstName:t.firstName,middleName:t.middleName,surName:t.surName,oldPassword:"",newPassword:"",confirmPassword:"",image:t.image})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(x.a)({},n,r))},e.handleChangeFile=function(){var t=e.state.fileRef,a=new FileReader;a.onload=function(t){e.setState({image:t.target.result})},t.current.files[0]&&a.readAsDataURL(t.current.files[0])},e.submitHandler=function(){var t=e.props.dispatch,a=e.state,n=a.firstName,r=a.surName,c=a.middleName,i=a.oldPassword,o=a.newPassword,s=a.fileRef;t(oe({firstName:n,surName:r,middleName:c,oldPassword:i,newPassword:o,avatar:s.current.files[0]||null})).then((function(){e.cancelHandler()}))},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.userProfile;this.setState({firstName:e.firstName,middleName:e.middleName,surName:e.surName,image:e.image})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isLoading,n=this.state,r=n.firstName,c=n.surName,i=n.middleName,o=n.oldPassword,s=n.newPassword,l=n.confirmPassword,u=n.image,m=n.fileRef;return p.a.createElement("div",{className:t.wrapper},p.a.createElement(ve.a,null,p.a.createElement(Ie.a,{className:t.formCard},p.a.createElement(yt.a,{container:!0,spacing:2},p.a.createElement(yt.a,{item:!0,xs:4},p.a.createElement(da.a,{className:t.avatarPreviewWrapper},p.a.createElement(gt.a,{className:t.avatarPreview,src:u||"/assets/img/no-user-image-big.png"})),p.a.createElement(we.a,{className:t.uploadButton,variant:"contained",component:"label",color:"primary"},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u0430\u0439\u043b",p.a.createElement("input",{type:"file",style:{display:"none"},ref:m,onChange:this.handleChangeFile}))),p.a.createElement(yt.a,{item:!0,xs:8},p.a.createElement(yt.a,{container:!0,direction:"column",style:{height:"100%"}},p.a.createElement(Te.a,{variant:"h4",component:"h2",gutterBottom:!0}),p.a.createElement("div",{className:t.form},p.a.createElement(St.a,{label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",className:t.textField,margin:"normal",name:"surName",value:c,onChange:this.handleChange}),p.a.createElement(St.a,{label:"\u0418\u043c\u044f",className:t.textField,margin:"normal",name:"firstName",value:r,onChange:this.handleChange}),p.a.createElement(St.a,{label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",className:t.textField,margin:"normal",name:"middleName",value:i,onChange:this.handleChange})),p.a.createElement(Te.a,{variant:"h4",component:"h2",gutterBottom:!0},"\u041f\u0430\u0440\u043e\u043b\u044c"),p.a.createElement("div",{className:t.form},p.a.createElement(qe,{label:"\u0421\u0442\u0430\u0440\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",className:t.textField,name:"oldPassword",value:o,handleChange:this.handleChange}),p.a.createElement(qe,{label:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",className:t.textField,name:"newPassword",value:s,handleChange:this.handleChange}),p.a.createElement(qe,{label:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",className:t.textField,name:"confirmPassword",value:l,handleChange:this.handleChange})),p.a.createElement(vt.a,{className:t.formActions},p.a.createElement(we.a,{color:"primary",variant:"contained",disabled:a,onClick:this.submitHandler},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),p.a.createElement(we.a,{variant:"outlined",onClick:this.cancelHandler,disabled:a},"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"))))))))}}]),a}(d.PureComponent),fa=Object(he.a)(Object(Ye.a)((function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"},formCard:{padding:e.spacing(2)},avatarPreview:{width:"100%",height:"100%",borderRadius:"8px"},avatarPreviewWrapper:{marginBottom:e.spacing(2),width:"100%"},uploadButton:{display:"block",textAlign:"center"},form:{display:"flex",flexWrap:"wrap",marginBottom:e.spacing(3)},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},formActions:{marginTop:"auto",padding:0}}})),Object(j.b)((function(e){return{userProfile:B(e),isLoading:V(e)}})))(pa),ha=a(135),ba=a.n(ha),ga=function(e){return e.adminPanel.isLoadingUsers},Ea=function(e){return e.adminPanel.users},va="ADMIN_PANEL",Oa=Object(y.a)("".concat(va,"/SET_IS_LOADING_USERS")),ja=Object(y.a)("".concat(va,"/SET_IS_LOADING_FORM")),wa=Object(y.a)("".concat(va,"/SET_USERS")),Na=Object(y.a)("".concat(va,"/SET_TO_ZERO_USERS")),xa=Object(S.a)(Object(x.a)({},Oa,(function(e,t){return t.payload})),!1),ya=Object(S.a)(Object(x.a)({},ja,(function(e,t){return t.payload})),!1),Sa=Object(S.a)((m={},Object(x.a)(m,wa,(function(e,t){return t.payload})),Object(x.a)(m,Na,(function(){return[]})),m),[]),ka=Object(k.b)({isLoadingUsers:xa,isLoadingForm:ya,users:Sa}),Ca=function(){return function(e,t){e(Oa(!0)),H({url:"/users",getState:t,dispatch:e}).then((function(t){e(wa(t))})).catch((function(e){return R({text:e.message,variant:"error"})})).finally((function(){return e(Oa(!1))}))}},Ta=function(e,t){return function(a,n){return new Promise((function(r){a(ja(!0)),H({url:"/users/".concat(e,"/permission"),method:"PATCH",data:{permission:t},getState:n,dispatch:a}).then((function(){R({text:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e!",variant:"success"}),a(Ca()),Se()(B(n()),"id",null)===e&&a(re()),r(!0)})).catch((function(e){R({text:e.message,variant:"error"})})).finally((function(){return a(ja(!1))}))}))}},Pa=function(e){return function(t,a){return new Promise((function(n){t(ja(!0)),H({url:"/users/".concat(e),method:"DELETE",getState:a,dispatch:t}).then((function(e){t(Ca()),n(!0)})).catch((function(e){R({text:e.message,variant:"error"})})).finally((function(){return t(ja(!1))}))}))}},Aa=a(420),Ia=a(414),Ra=a(412),_a=a(413),Da=a(424),La=function(e){var t=e.handleChange,a=e.values,n=e.label;return p.a.createElement(p.a.Fragment,null,p.a.createElement(Te.a,{variant:"h5",component:"h3",gutterBottom:!0},n),p.a.createElement(Ra.a,null,p.a.createElement(_a.a,{control:p.a.createElement(Da.a,{checked:a.C,value:"create",onChange:t("C")}),label:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435"}),p.a.createElement(_a.a,{control:p.a.createElement(Da.a,{checked:a.R,value:"read",onChange:t("R")}),label:"\u0427\u0442\u0435\u043d\u0438\u0435"}),p.a.createElement(_a.a,{control:p.a.createElement(Da.a,{checked:a.U,value:"update",onChange:t("U")}),label:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),p.a.createElement(_a.a,{control:p.a.createElement(Da.a,{checked:a.D,value:"delete",onChange:t("D")}),label:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435"})))},Ua={selectedUserId:"",selectedUser:null,permission:{chat:{C:!0,R:!0,U:!1,D:!1},news:{C:!0,R:!0,U:!1,D:!1},settings:{C:!0,R:!0,U:!1,D:!1}}},Fa=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state=Ua,e.handleChange=function(t){return function(a){return function(n){var r=n.target.checked,c=e.state.permission;e.setState({permission:Object(Pe.a)(Object(Pe.a)({},c),{},Object(x.a)({},t,Object(Pe.a)(Object(Pe.a)({},c[t]),{},Object(x.a)({},a,r))))})}}},e.handleChangeUser=function(t){var a=e.props.users,n=t.target.value;console.log("value: ",t);var r=n?ba()(a.find((function(e){return e.id===n}))):null;console.log("selectedUser: ",r),e.setState({selectedUserId:n,selectedUser:r,permission:r.permission})},e.submitHandler=function(){var t=e.state,a=t.permission,n=t.selectedUserId;(0,e.props.dispatch)(Ta(n,a))},e.cancelHandler=function(){var t=e.props.users,a=e.state.selectedUserId,n=ba()(t.find((function(e){return e.id===a})));a&&e.setState({selectedUser:n,permission:n.permission})},e.deleteHandler=function(){var t=e.state.selectedUserId,a=e.props.dispatch;t&&a(Pa(t)).then((function(){return e.setState(Ua)}))},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(Ca())}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.users,n=this.state,r=n.selectedUserId,c=n.selectedUser;return p.a.createElement("div",{className:t.wrapper},p.a.createElement(ve.a,null,p.a.createElement(Ie.a,{className:t.formCard},p.a.createElement(yt.a,{container:!0,wrap:"nowrap",alignItems:"center",className:t.mb3},p.a.createElement(gt.a,{src:c&&c.image||"/assets/img/no-user-image.png",className:t.userAvatar}),p.a.createElement(Re.a,{className:t.userSelect},p.a.createElement(_e.a,{htmlFor:"age-simple"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),p.a.createElement(Aa.a,{value:r,onChange:this.handleChangeUser},p.a.createElement(Ia.a,{value:null},"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d"),a.map((function(e){return p.a.createElement(Ia.a,{value:e.id,key:e.id},e.username)}))))),c&&this.renderForms())))}},{key:"renderForms",value:function(){var e=this.props.classes,t=this.state.permission;return p.a.createElement(p.a.Fragment,null,p.a.createElement(yt.a,{container:!0,spacing:2,className:e.mb3},p.a.createElement(yt.a,{item:!0,xs:4},p.a.createElement(La,{label:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u044b",values:t.settings,handleChange:this.handleChange("settings")})),p.a.createElement(yt.a,{item:!0,xs:4},p.a.createElement(La,{label:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438",values:t.news,handleChange:this.handleChange("news")})),p.a.createElement(yt.a,{item:!0,xs:4},p.a.createElement(La,{label:"\u0427\u0430\u0442",values:t.chat,handleChange:this.handleChange("chat")}))),p.a.createElement(yt.a,{container:!0,spacing:2,justify:"center",alignItems:"center"},p.a.createElement(kt.a,null,p.a.createElement(we.a,{variant:"contained",color:"secondary",onClick:this.submitHandler},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),p.a.createElement(we.a,{variant:"contained",onClick:this.cancelHandler},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),p.a.createElement(we.a,{variant:"contained",onClick:this.deleteHandler},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"))))}}]),a}(d.PureComponent),Ma=Object(he.a)(Object(Ye.a)((function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"},formCard:{padding:e.spacing(2)},userSelect:{width:"100%"},userAvatar:{marginRight:e.spacing(2)},mb3:{marginBottom:e.spacing(3)}}})),Object(j.b)((function(e){return{isLoading:ga(e),users:Ea(e)}})))(Fa),Wa=a(137),Ha=a(3),Ba=a(194),Ga=a.n(Ba),za=a(196),qa=a.n(za),Va=a(197),Xa=a.n(Va),Ja=a(198),Za=a.n(Ja),Qa=a(106),Ya=a(416),Ka=a(430),$a=a(417),en=a(195),tn=a.n(en),an=a(415),nn=["className","message","onClose","variant"],rn=["openNotification","closeNotification","notifications"],cn={success:Ga.a,warning:tn.a,error:qa.a,info:Xa.a},on=Object(an.a)((function(e){return{success:{backgroundColor:Qa.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:Ya.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function sn(e){var t=on(),a=e.className,n=e.message,r=e.onClose,c=e.variant,i=Object(Wa.a)(e,nn),o=cn[c];return p.a.createElement($a.a,Object.assign({className:Object(Ha.a)(t[c],a),"aria-describedby":"client-snackbar",message:p.a.createElement("span",{id:"client-snackbar",className:t.message},p.a.createElement(o,{className:Object(Ha.a)(t.icon,t.iconVariant)}),n),action:[p.a.createElement(Me.a,{key:"close","aria-label":"close",color:"inherit",onClick:r},p.a.createElement(Za.a,{className:t.icon}))]},i))}var ln=function(e){var t={openNotification:R,closeNotification:_};return Object(j.b)((function(e){return{notifications:D(e)}}),t)((function(t){var a=t.openNotification,n=t.closeNotification,r=t.notifications,c=Object(Wa.a)(t,rn),i=function(e){return function(t,a){"clickaway"!==a&&n(e)}},o=r.find((function(e){return!!e.isActive}));return p.a.createElement(p.a.Fragment,null,p.a.createElement(e,Object.assign({},c,{openNotification:a})),o&&p.a.createElement(Ka.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:!0,autoHideDuration:2500,onClose:i(o.id)},p.a.createElement(sn,{onClose:i(o.id),variant:o.variant,message:o.text})))}))},un=function(){return{root:{display:"flex",flexDirection:"column",height:"100%",minHeight:"100vh",backgroundColor:"#f5f5f5"},container:{flex:"1 1 100%",display:"flex",flexDirection:"column"},mainLayoutWrapper:{background:'url("/assets/img/another-background.png") no-repeat',backgroundPosition:"center center",backgroundSize:"cover",width:"100%",flex:"1 1 100%",display:"flex",alignItems:"stretch"}}},mn=Object(be.a)(un)((function(e){var t=e.children,a=e.classes;return p.a.createElement("div",{className:a.mainLayoutWrapper},t)})),dn=function(e){return ln(function(e){return function(t){return p.a.createElement(mn,null,p.a.createElement(e,t))}}(e))},pn=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.props.dispatch(re())}},{key:"render",value:function(){var e=this.props.classes;return p.a.createElement("div",{className:e.root},p.a.createElement(Ce,null),p.a.createElement(ge.a,{className:e.container},p.a.createElement(O.d,null,p.a.createElement(O.b,{path:se,exact:!0,component:ln(Qe)}),p.a.createElement(O.b,{path:le,component:ln(Qe)}),p.a.createElement(fe,{permissionPath:"news",path:ue,component:dn(At)}),p.a.createElement(fe,{permissionPath:"chat",path:me,component:dn(ua)}),p.a.createElement(fe,{path:de,component:dn(fa)}),p.a.createElement(fe,{permissionPath:"settings",path:pe,component:dn(Ma)}))))}}]),a}(d.PureComponent),fn=Object(he.a)(Object(be.a)(un),Object(j.b)())(pn),hn=a(419),bn=a(418),gn=a(105),En=a(200),vn=Object(En.a)({palette:{primary:{main:"#63c1a0"},secondary:{main:"#19857b"},error:{main:gn.a.A400},background:{default:"rgba(255, 255, 255, .87)"}}}),On=a(199),jn=Object(k.b)({auth:ne,notifications:U,news:dt,adminPanel:ka,chat:ea}),wn=function(){return Object(k.d)(jn,Object(k.c)(Object(k.a)(On.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}))};h.a.render(p.a.createElement(bn.a,{theme:vn},p.a.createElement(hn.a,null),p.a.createElement(j.a,{store:wn()},p.a.createElement(je.a,null,p.a.createElement(fn,null)))),document.getElementById("root"))}},[[358,1,2]]]);
//# sourceMappingURL=main.af7a8efd.chunk.js.map